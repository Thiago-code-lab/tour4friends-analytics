<div align="center">
  <img width="1112" height="266" alt="Tour4Friends Banner" src="https://github.com/user-attachments/assets/8a1c646f-c801-455b-8448-8c9c8ecc3c90" />
  
  # ğŸŒ Tour4Friends Analytics - Data Warehouse
  
  <img src="https://readme-typing-svg.herokuapp.com?font=JetBrains+Mono&weight=500&size=22&duration=3000&pause=1000&color=667EEA&center=true&vCenter=true&width=800&lines=ğŸ“Š+Business+Intelligence+%26+Data+Warehouse;ğŸ”„+AutomaÃ§Ã£o+com+PL%2FpgSQL;â­+Star+Schema+Implementation" alt="Typing Animation" />
  
  <br/>
  
  **Projeto Integrador - 3Âº Semestre** | **Curso:** Big Data para NegÃ³cios | **InstituiÃ§Ã£o:** FATEC
  
  <br/>
  
  ![PostgreSQL](https://img.shields.io/badge/PostgreSQL_16-316192?style=for-the-badge&logo=postgresql&logoColor=white)
  ![SQL](https://img.shields.io/badge/PL%2FpgSQL-4479A1?style=for-the-badge&logo=postgresql&logoColor=white)
  ![Git](https://img.shields.io/badge/Git-F05032?style=for-the-badge&logo=git&logoColor=white)
  ![VS Code](https://img.shields.io/badge/VS_Code-007ACC?style=for-the-badge&logo=visual-studio-code&logoColor=white)
  
</div>

---

## ğŸ“‹ Sobre o Projeto

<table>
<tr>
<td width="70%" valign="top">

Este repositÃ³rio contÃ©m a implementaÃ§Ã£o do **Data Warehouse (DW)** para a empresa fictÃ­cia **Tour4Friends**. O objetivo do projeto Ã© estruturar dados de peregrinaÃ§Ã£o e turismo para permitir anÃ¡lises estratÃ©gicas sobre fluxo de pessoas, modalidades de transporte e sazonalidade.

O foco deste entregÃ¡vel Ã© a implementaÃ§Ã£o de **LÃ³gica de NegÃ³cio no Banco de Dados (PL/pgSQL)**, garantindo automaÃ§Ã£o, consistÃªncia e auditoria dos dados diretamente na camada de armazenamento.

### ğŸ¯ Objetivos do Projeto
- âœ… Implementar Data Warehouse com modelagem dimensional
- âœ… Criar rotinas avanÃ§adas de automaÃ§Ã£o em PL/pgSQL
- âœ… Garantir governanÃ§a e auditoria de dados
- âœ… Facilitar anÃ¡lises estratÃ©gicas de Business Intelligence

</td>
<td width="30%" valign="top" align="center">

<br/>

```sql
-- Data-Driven
SELECT decision
FROM analytics
WHERE quality = 'HIGH'
  AND automation = TRUE
  AND governance = TRUE;
```

<br/>

**ğŸ—ï¸ Arquitetura**

Star Schema â­

**ğŸ” SeguranÃ§a**

Auditoria Completa

**âš¡ Performance**

Queries Otimizadas

</td>
</tr>
</table>

---

<details open>
  <summary><h2>ğŸ‘¥ Integrantes do Grupo</h2></summary>
  
  <br/>
  
  <table align="center">
    <tr>
      <td align="center">
        <a href="#">
          <img src="https://avatars.githubusercontent.com/u/125063071?v=4" width="100px;" alt="Membro 1"/><br/>
          <sub><b>Pablo Roberto</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="#">
          <img src="https://avatars.githubusercontent.com/u/198763242?v=4" width="100px;" alt="Membro 2"/><br/>
          <sub><b>Lucas Antonio</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="#">
          <img src="https://camo.githubusercontent.com/5e24e0145a46d5d921ad0e095a1d094dd982c69e680d5559437f99ebae86ee7b/68747470733a2f2f6d656469612e6c6963646e2e636f6d2f646d732f696d6167652f76322f44353630334151467a6b5f45626447465558672f70726f66696c652d646973706c617970686f746f2d63726f705f3830305f3830302f4235365a705244585375473041492d2f302f313736323239363432393537333f653d3137363432303136303026763d6265746126743d396a7369345176432d663949396d366f66326e4358666a4a44467164514268656f64534d7370574b4d4e4d" width="100px;" alt="Membro 3"/><br/>
          <sub><b>Thiago Cardoso</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="#">
          <img src="https://github.com/github.png" width="100px;" alt="Membro 4"/><br/>
          <sub><b>William Nunes</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="#">
          <img src="https://github.com/github.png" width="100px;" alt="Membro 4"/><br/>
          <sub><b>Murilo Santos</b></sub>
        </a>
      </td>
      <td align="center">
        <a href="#">
          <img src="https://github.com/github.png" width="100px;" alt="Membro 4"/><br/>
          <sub><b>Daniel Fernando</b></sub>
        </a>
      </td>
      </tr>
    
  </table>
  
</details>

---

## ğŸ› ï¸ Tecnologias Utilizadas

<div align="center">

<table>
  <tr>
    <td align="center" width="96">
      <img src="https://skillicons.dev/icons?i=postgres" width="48" height="48" alt="PostgreSQL" />
      <br>PostgreSQL 16
    </td>
    <td align="center" width="96">
      <img src="https://skillicons.dev/icons?i=vscode" width="48" height="48" alt="VS Code" />
      <br>VS Code
    </td>
    <td align="center" width="96">
      <img src="https://skillicons.dev/icons?i=git" width="48" height="48" alt="Git" />
      <br>Git/GitHub
    </td>
    <td align="center" width="96">
      <img src="https://techstack-generator.vercel.app/github-icon.svg" alt="GitHub" width="48" height="48" />
      <br>GitHub
    </td>
  </tr>
</table>

### ğŸ“š Stack TÃ©cnica

| Categoria | Tecnologia |
|-----------|-----------|
| **Banco de Dados** | PostgreSQL 16 |
| **Linguagem** | SQL (PL/pgSQL) |
| **Modelagem** | Star Schema (Fatos e DimensÃµes) |
| **Versionamento** | Git/GitHub |
| **IDE** | VS Code |

</div>

---

## ğŸš€ Funcionalidades Implementadas

<div align="center">
  <h3>EntregÃ¡vel de Banco de Dados - LÃ³gica de NegÃ³cio AvanÃ§ada</h3>
</div>

Conforme os requisitos do projeto integrador, foram desenvolvidas rotinas avanÃ§adas de banco de dados para suportar a inteligÃªncia de negÃ³cios.

### 1ï¸âƒ£ Stored Procedure com Cursor DinÃ¢mico

<table>
<tr>
<td width="50%" valign="top">

#### ğŸ“Œ InformaÃ§Ãµes TÃ©cnicas

**Nome:** `calcular_total_peregrinos_dinamico`

**Tipo:** Stored Procedure com Cursor NÃ£o Vinculado (Unbound)

**ParÃ¢metros:**
- Tabela de origem
- Campo de agrupamento
- Campo de soma

</td>
<td width="50%" valign="top">

#### ğŸ’¡ AplicaÃ§Ã£o no NegÃ³cio

Permite aos analistas de dados gerar relatÃ³rios rÃ¡pidos sobre quais modais (Bicicleta, A pÃ©, etc.) estÃ£o sendo mais utilizados, facilitando o direcionamento de investimentos em infraestrutura.

**BenefÃ­cios:**
- âš¡ Queries dinÃ¢micas em tempo de execuÃ§Ã£o
- ğŸ“Š Flexibilidade analÃ­tica
- ğŸ¯ DecisÃµes data-driven

</td>
</tr>
</table>

#### ğŸ”§ Funcionalidade

Percorre a tabela de fatos utilizando um *cursor nÃ£o vinculado (unbound)* e executa uma query dinÃ¢mica. Permite calcular a soma total de peregrinos agrupada por qualquer dimensÃ£o escolhida em tempo de execuÃ§Ã£o (ex: agrupar por Tipo de Transporte ou por MÃªs), sem necessidade de reescrever o cÃ³digo SQL.

---

### 2ï¸âƒ£ Trigger de Auditoria (Log de SeguranÃ§a)

<table>
<tr>
<td width="50%" valign="top">

#### ğŸ“Œ InformaÃ§Ãµes TÃ©cnicas

**Nome:** `trg_vigia_peregrinos`

**Tabela Monitorada:** `fato_peregrinos_por_transporte`

**Eventos Capturados:**
- ğŸ”µ `INSERT`
- ğŸŸ¡ `UPDATE`
- ğŸ”´ `DELETE`

</td>
<td width="50%" valign="top">

#### ğŸ’¡ AplicaÃ§Ã£o no NegÃ³cio

Garante a **GovernanÃ§a de Dados**. Evita que nÃºmeros histÃ³ricos de peregrinos sejam alterados acidentalmente ou maliciosamente sem deixar rastros, assegurando a confiabilidade dos dashboards gerenciais.

**BenefÃ­cios:**
- ğŸ›¡ï¸ Rastreabilidade completa
- ğŸ“ Logs automÃ¡ticos
- âœ… Compliance garantido

</td>
</tr>
</table>

#### ğŸ”§ Funcionalidade

Monitora eventos de `INSERT`, `UPDATE` e `DELETE` na tabela principal de fatos. Sempre que um dado financeiro ou de contagem Ã© alterado, o trigger dispara automaticamente e grava uma cÃ³pia dos dados originais e dos novos dados em uma tabela de histÃ³rico (`Log_Auditoria_Peregrinos`), junto com o usuÃ¡rio e data da alteraÃ§Ã£o.

---

## ğŸ“‚ Estrutura do Banco de Dados

<div align="center">

### â­ Modelagem Star Schema

<table align="center">
  <tr>
    <th>Tipo</th>
    <th>Nome da Tabela</th>
    <th>DescriÃ§Ã£o</th>
  </tr>
  <tr>
    <td align="center">ğŸ¯ <b>Fato</b></td>
    <td><code>fato_peregrinos_por_transporte</code></td>
    <td>Registra a quantidade de peregrinos</td>
  </tr>
  <tr>
    <td align="center">ğŸ“Š <b>DimensÃ£o</b></td>
    <td><code>dim_transporte</code></td>
    <td>Modalidades: A pÃ©, Bicicleta, Cavalo, etc.</td>
  </tr>
  <tr>
    <td align="center">ğŸ“Š <b>DimensÃ£o</b></td>
    <td><code>dim_tempo</code></td>
    <td>Sazonalidade: Ano, MÃªs, EstaÃ§Ã£o</td>
  </tr>
  <tr>
    <td align="center">ğŸ” <b>Auxiliar</b></td>
    <td><code>log_auditoria_peregrinos</code></td>
    <td>Tabela criada automaticamente para logs</td>
  </tr>
</table>

</div>

```mermaid
erDiagram
    FATO_PEREGRINOS ||--o{ DIM_TRANSPORTE : "fk_transporte"
    FATO_PEREGRINOS ||--o{ DIM_TEMPO : "fk_tempo"
    FATO_PEREGRINOS ||--o{ LOG_AUDITORIA : "monitora"
```

---

## â–¶ï¸ Como Executar

<details>
  <summary><h3>ğŸ“¥ Passo 1: Clonar o RepositÃ³rio</h3></summary>
  
  ```bash
  git clone https://github.com/Thiago-code-lab/tour4friends-analytics.git
  cd tour4friends-analytics
  ```
  
</details>

<details>
  <summary><h3>ğŸ”Œ Passo 2: Conectar ao Banco de Dados</h3></summary>
  
  Utilize o **VS Code** ou **PgAdmin** para conectar ao seu servidor PostgreSQL local.
  
  **ConfiguraÃ§Ã£o Recomendada:**
  - Host: `localhost`
  - Porta: `5432`
  - Database: `tour4friends_dw`
  - User: `postgres`
  
</details>

<details>
  <summary><h3>ğŸ—ï¸ Passo 3: Criar a Estrutura</h3></summary>
  
  Execute o script `table.sql` para criar as tabelas e relacionamentos.
  
  ```sql
  \i table.sql
  ```
  
</details>

<details>
  <summary><h3>âš™ï¸ Passo 4: Criar a LÃ³gica</h3></summary>
  
  Execute o script `database_objects.sql` para criar a Procedure e o Trigger.
  
  ```sql
  \i database_objects.sql
  ```
  
</details>

<details open>
  <summary><h3>âœ… Passo 5: Testar</h3></summary>
  
  Execute o comando para testar a stored procedure:
  
  ```sql
  CALL calcular_total_peregrinos_dinamico(
    'fato_peregrinos_por_transporte', 
    'fk_transporte', 
    'qtd_peregrinos'
  );
  ```
  
  **SaÃ­da Esperada:**
  ```
  âœ“ Query executada com sucesso
  âœ“ Totais calculados por modalidade de transporte
  âœ“ Resultados agrupados e ordenados
  ```
  
</details>

---

## ğŸ“Š Arquitetura do Projeto

```mermaid
graph TD
    A[Dados Brutos] --> B[ETL Process]
    B --> C[Data Warehouse]
    C --> D[Fatos]
    C --> E[DimensÃµes]
    D --> F[BI Analytics]
    E --> F
    D --> G[Auditoria]
    style C fill:#667eea
    style F fill:#764ba2
    style G fill:#f093fb
```

---

## ğŸ“ˆ BenefÃ­cios da ImplementaÃ§Ã£o

<div align="center">

| ğŸ¯ Aspecto | ğŸ“Š BenefÃ­cio |
|-----------|-------------|
| **Performance** | Consultas otimizadas com Ã­ndices estratÃ©gicos |
| **AutomaÃ§Ã£o** | Processos automÃ¡ticos com triggers e procedures |
| **GovernanÃ§a** | Auditoria completa de todas as operaÃ§Ãµes |
| **Escalabilidade** | Arquitetura preparada para crescimento |
| **Confiabilidade** | Logs detalhados para troubleshooting |

</div>

---

## ğŸ“ Contexto AcadÃªmico

<table align="center">
  <tr>
    <td align="center" width="33%">
      <h3>ğŸ“š Disciplina</h3>
      Banco de Dados AvanÃ§ado
    </td>
    <td align="center" width="33%">
      <h3>ğŸ¯ Objetivo</h3>
      AplicaÃ§Ã£o prÃ¡tica de conceitos de DW
    </td>
    <td align="center" width="34%">
      <h3>â­ CompetÃªncias</h3>
      PL/pgSQL, Modelagem, BI
    </td>
  </tr>
</table>

---

## ğŸ“ LicenÃ§a e Uso

<div align="center">

**Projeto desenvolvido para fins acadÃªmicos - 2025**

![License](https://img.shields.io/badge/License-Academic-blue?style=for-the-badge)
![Status](https://img.shields.io/badge/Status-Ativo-success?style=for-the-badge)
![Version](https://img.shields.io/badge/Version-1.0-informational?style=for-the-badge)

</div>

---

<div align="center">
  
  <img src="https://capsule-render.vercel.app/api?type=waving&color=gradient&customColorList=6,12,20&height=100&section=footer"/>
  
  **ğŸŒ Tour4Friends Analytics** | *Transformando dados em insights estratÃ©gicos*
  
</div>
